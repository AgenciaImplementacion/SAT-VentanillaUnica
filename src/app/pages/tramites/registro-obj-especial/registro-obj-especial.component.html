<div class="card">
  <div class="card-header">Registro de Objeto de Régimen Especial</div>
  <div class="card-body" *ngIf="entityModels">
    <form action="" method="post">
      <!-- Topics -->
      <div class="form-group">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Temática: {{entityModels.name}}</span>
          </div>
          <select class="form-control" id="Topics" name="Topics" [(ngModel)]="TopicSeleccionado"
            *ngFor="let topic of entityModels.topics">
            <option value="0">Por favor seleccione la temática</option>
            <option [ngValue]="topic">{{topic.name}}</option>
          </select>
          <div class="input-group-append">
          </div>
        </div>
      </div>
      <!-- Models -->
      <div class="form-group" *ngIf="TopicSeleccionado">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Modelo: {{TopicSeleccionado.name}}</span>
          </div>
          <select class="form-control" id="modelo" name="modelo" [(ngModel)]="ModeloSeleccionado"
            *ngFor="let model of TopicSeleccionado.models">
            <option value="0">Por favor seleccione el modelo</option>
            <option [ngValue]="model">{{model.name}}</option>
          </select>
          <div class="input-group-append">
          </div>
        </div>
      </div>

      <div class="form-group" *ngIf="ModeloSeleccionado">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Objetos</span>
          </div>
          <select class="form-control" id="objetos" name="objetos" size="5" multiple=""
            [(ngModel)]="ObjetoSeleccionado">
            <option (click)="CreateCampos()" *ngFor="let obj of ModeloSeleccionado.objects; let i = index"
              [ngValue]="obj">{{obj.name}}
            </option>
          </select>
          <div class="input-group-append">
          </div>
        </div>
      </div>
      <div class="form-group" *ngIf="ObjetoSeleccionado">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">url</span>
          </div>
          <input class="form-control" id="url" type="text" name="url" disabled="disabled"
            [value]="ObjetoSeleccionado[0].url">
          <div class="input-group-append">
          </div>
        </div>
      </div>
      <div class="form-group" *ngIf="ObjetoSeleccionado">
        <div class="row">
          <div class="col-6">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha de Inicio</span>
              </div>
              <input class="form-control" id="fechaInicio" type="date" name="fechaInicio" [(ngModel)]="fechaInicio">
              <div class="input-group-append">
              </div>
            </div>
          </div>
          <div class="col-6">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">Fecha de Final</span>
              </div>
              <input class="form-control" id="fechaFinal" type="date" name="fechaFinal" [(ngModel)]="fechaFinal">
              <div class="input-group-append">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row" *ngIf="ObjetoSeleccionado">
        <div class="col-11">
          <div class="input-group-text">Categoria</div>
        </div>
        <div class="col-1">
          <button class="btn btn-primary" type="submit" (click)="createCategory()">+</button>
        </div>
      </div>
      <br>
      <div class="col-10 offset-1" *ngIf="ObjetoSeleccionado">
        <div id="Nodo">
          <div id="child">
            <div class="form-group">
              <div class="input-group-text">Categoria 1</div>
              <br>
              <div class="input-group" *ngIf="camposFeature">
                <div class="input-group-prepend">
                  <span class="input-group-text">Campo</span>
                </div>
                <select class="form-control" id="campo" name="campo" [(ngModel)]="campo">
                  <option value="0">Por favor seleccione el campo</option>
                  <option [ngValue]="item.key" *ngFor="let item of camposFeature.features[0].properties | keyvalue">
                    {{item.key}}
                  </option>
                </select>
                <div class="input-group-append">
                </div>
              </div>
              <br>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">Valor</span>
                </div>
                <input class="form-control" id="valor" type="text" name="valor" [(ngModel)]="valorCampo">
                <div class="input-group-append">
                </div>
              </div>
              <br>

              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">Url más info</span>
                </div>
                <input class="form-control" id="urlInfo" type="text" name="urlInfo" [(ngModel)]="urlInfo">
                <div class="input-group-append">
                </div>
              </div>
              <br>

              <span class="input-group-text">Descripción</span>
              <div class="">
                <textarea class="form-control" id="textarea-input" name="textarea-input" rows="2"
                  placeholder="Contendido de la Descripción..." [(ngModel)]="description"></textarea>
              </div>

              <br>
              <span class="input-group-text">Restricciones</span>
              <div class="col-form-label row offset-1">
                <div class="form-check checkbox col-3" *ngFor="let item of restricciones; let i = index">
                  <input name="restriccion{{i}}" class="form-check-input" id="check{{i}}" type="checkbox"
                    [(ngModel)]="restricciones[i].status">
                  <label class="form-check-label" for="check{{i}}">{{item.name}}</label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <div class="form-group form-actions">
        <div class="text-center col-12">
          <button class="btn btn-primary" type="submit" (click)="RegistrarObjeto()">Registrar Objeto</button>
        </div>
      </div>
    </form>
  </div>
</div>